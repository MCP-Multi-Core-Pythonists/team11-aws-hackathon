# 백엔드 API 엔드포인트 문서

## 개요
TeamSync Pro의 모든 백엔드 API 엔드포인트를 정리한 문서입니다.

## 기본 정보
- **Base URL**: `http://localhost:8000`
- **인증**: JWT Bearer Token (대부분의 엔드포인트)
- **Content-Type**: `application/json`

## 1. 시스템 엔드포인트

### 헬스 체크
- `GET /health` - 헬스 체크 (인증 필요)
- `GET /_health` - 공개 헬스 체크 (인증 불필요)
- `GET /version` - 버전 정보

## 2. 인증 엔드포인트

### 사용자 인증
- `POST /auth/login` - 로그인
  ```json
  {
    "email": "user@example.com",
    "password": "password123"
  }
  ```

- `POST /auth/register` - 회원가입
  ```json
  {
    "email": "user@example.com",
    "password": "password123",
    "name": "사용자명"
  }
  ```

### 사용자 프로필
- `GET /users/me` - 내 정보 조회
- `PUT /users/me` - 내 정보 수정
  ```json
  {
    "email": "newemail@example.com",
    "name": "새로운 이름"
  }
  ```

## 3. 팀 관리 엔드포인트

### 팀 기본 관리
- `GET /teams` - 내 팀 목록
- `POST /teams` - 팀 생성
  ```json
  {
    "name": "개발팀",
    "description": "메인 개발팀입니다",
    "is_public": false
  }
  ```

### 팀 멤버 관리
- `GET /teams/{team_id}/members` - 팀 멤버 목록
- `GET /teams/{team_id}/members/{user_id}` - 특정 멤버 정보
- `POST /teams/{team_id}/invite` - 팀원 초대
  ```json
  {
    "email": "member@example.com",
    "role": "member"
  }
  ```
- `DELETE /teams/{team_id}/members/{user_id}` - 팀원 제거
- `POST /teams/{team_id}/roles` - 역할 할당
  ```json
  {
    "user_id": "user-uuid",
    "role": "admin"
  }
  ```

## 4. 팀 설정 관리 엔드포인트

### 설정 CRUD
- `GET /teams/{team_id}/configs` - 팀 설정 목록
- `POST /teams/{team_id}/configs` - 설정 업로드
  ```json
  {
    "name": "React 개발 설정",
    "settings_json": {
      "editor.fontSize": 14,
      "workbench.colorTheme": "Dark+"
    }
  }
  ```
- `PUT /teams/{team_id}/configs/{config_id}` - 설정 수정
- `DELETE /teams/{team_id}/configs/{config_id}` - 설정 삭제

### 설정 공유/복사
- `POST /teams/{team_id}/configs/{config_id}/copy` - 다른 팀으로 복사
  ```json
  {
    "target_team_id": "target-team-uuid"
  }
  ```
- `POST /teams/{team_id}/configs/{config_id}/share` - 공유 링크 생성

## 5. 프롬프트 관리 엔드포인트

### 프롬프트 CRUD
- `GET /teams/{team_id}/prompts` - 팀 프롬프트 목록
- `POST /teams/{team_id}/prompts` - 프롬프트 생성
  ```json
  {
    "name": "코드 리뷰 프롬프트",
    "content": "이 코드를 리뷰해주세요...",
    "category": "코드리뷰"
  }
  ```
- `PUT /teams/{team_id}/prompts/{prompt_id}` - 프롬프트 수정
- `DELETE /teams/{team_id}/prompts/{prompt_id}` - 프롬프트 삭제

### 프롬프트 카테고리
- `GET /prompt-categories` - 카테고리 목록
- `POST /prompt-categories` - 카테고리 생성
  ```json
  {
    "name": "새 카테고리",
    "description": "카테고리 설명"
  }
  ```

## 6. 설정 동기화 엔드포인트

### 동기화 기능
- `POST /settings/sync/apply` - 설정 동기화 적용
  ```json
  {
    "settings": {
      "editor.fontSize": 16,
      "workbench.colorTheme": "Light+"
    }
  }
  ```
- `POST /settings/sync/preview` - 동기화 미리보기
- `GET /settings` - 설정 목록

### 버전 관리
- `GET /settings/{setting_id}/versions` - 설정 버전 히스토리
- `POST /settings/{setting_id}/rollback` - 이전 버전으로 롤백
  ```json
  {
    "version": 3,
    "reason": "이전 설정으로 복원"
  }
  ```
- `GET /settings/{setting_id}/diff` - 버전 간 차이점 비교
  - Query: `from_version`, `to_version`

## 7. 검색 엔드포인트

### 통합 검색
- `GET /search/settings` - 설정 검색
  - Query: `tags`, `owner_id`, `group_id`, `editor_type`, `scope`, `search_text`, `cursor`, `limit`
- `GET /search/teams` - 팀 검색
  - Query: `query`, `limit`
- `GET /search/prompts` - 프롬프트 검색
  - Query: `query`, `category`, `team_id`, `limit`
- `GET /search/configs` - 설정 검색
  - Query: `query`, `team_id`, `limit`

### 자동완성
- `GET /search/tags/suggestions` - 태그 자동완성
  - Query: `prefix`, `limit`

## 8. 북마크 엔드포인트

### 북마크 관리
- `GET /bookmarks` - 북마크 목록
- `POST /bookmarks` - 북마크 생성
  ```json
  {
    "setting_id": "setting-uuid",
    "name": "내 React 설정",
    "description": "개인용 React 설정",
    "tags": ["react", "personal"]
  }
  ```
- `DELETE /bookmarks/{bookmark_id}` - 북마크 삭제
- `GET /bookmarks/tags/suggestions` - 북마크 태그 제안
  - Query: `prefix`

## 9. 알림 엔드포인트

### 알림 관리
- `GET /notifications` - 내 알림 목록
- `PUT /notifications/{notification_id}/read` - 알림 읽음 처리
- `DELETE /notifications/{notification_id}` - 알림 삭제

## 10. 활동 기록 엔드포인트

### 활동 로그
- `GET /teams/{team_id}/activities` - 팀 활동 기록
- `GET /users/me/activities` - 내 활동 기록

## 11. 발행 관리 엔드포인트

### 발행된 설정 관리
- `DELETE /publications/{setting_id}` - 발행된 설정 삭제

## 12. 감사 로그 엔드포인트

### 감사 기능
- 별도 라우터로 구현 (`/audit/*`)

## 응답 형식

### 성공 응답
```json
{
  "success": true,
  "data": { ... },
  "message": "작업이 완료되었습니다"
}
```

### 에러 응답
```json
{
  "code": "ERROR_CODE",
  "message": "에러 메시지",
  "hint": "해결 방법 힌트",
  "correlation_id": "correlation-uuid"
}
```

## 인증 헤더
```
Authorization: Bearer <JWT_TOKEN>
```

## 페이지네이션
대부분의 목록 엔드포인트는 다음 쿼리 파라미터를 지원합니다:
- `limit`: 결과 개수 제한 (기본값: 20, 최대: 100)
- `cursor`: 다음 페이지 커서 (해당하는 경우)

## 상태 코드
- `200`: 성공
- `201`: 생성 성공
- `400`: 잘못된 요청
- `401`: 인증 필요
- `403`: 권한 없음
- `404`: 리소스 없음
- `422`: 유효성 검사 실패
- `500`: 서버 에러
