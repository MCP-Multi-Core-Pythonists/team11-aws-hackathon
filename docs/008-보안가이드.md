# 보안 가이드

## 🔐 API 키 및 토큰 보안

### 1. 환경 변수 사용
```bash
# .env 파일 (절대 Git에 커밋하지 말 것!)
JWT_SECRET=your-super-secret-32-character-key
API_KEY=your-api-key-here
DATABASE_URL=your-database-connection-string
```

### 2. Git 보안
```bash
# .gitignore에 추가
.env
.env.local
.env.production
*.key
*.pem
config/secrets.json
```

### 3. JWT 토큰 보안
- **만료 시간 설정**: 24시간 이하
- **강력한 시크릿**: 최소 32자 랜덤 문자열
- **HTTPS 필수**: 프로덕션에서는 반드시 HTTPS 사용
- **토큰 저장**: 클라이언트에서 안전한 저장소 사용

### 4. 비밀번호 보안
```python
import bcrypt

# 비밀번호 해싱
password_hash = bcrypt.hashpw(password.encode('utf-8'), bcrypt.gensalt())

# 비밀번호 검증
bcrypt.checkpw(password.encode('utf-8'), stored_hash)
```

### 5. API 엔드포인트 보안
- **인증 필수**: 모든 민감한 엔드포인트에 토큰 검증
- **권한 확인**: 사용자별 리소스 접근 제한
- **Rate Limiting**: API 호출 횟수 제한
- **입력 검증**: 모든 입력값 검증 및 sanitization

### 6. 프로덕션 배포 시 체크리스트
- [ ] 모든 시크릿이 환경 변수로 설정됨
- [ ] .env 파일이 .gitignore에 포함됨
- [ ] HTTPS 설정 완료
- [ ] 데이터베이스 연결 암호화
- [ ] 로그에 민감한 정보 출력 안 함
- [ ] CORS 설정 적절히 구성
- [ ] 에러 메시지에 민감한 정보 노출 안 함

### 7. VS Code Extension 보안
```typescript
// 토큰을 안전하게 저장
await context.secrets.store('auth_token', token);

// 토큰 읽기
const token = await context.secrets.get('auth_token');
```

### 8. AWS 보안 (프로덕션)
- **IAM 역할 사용**: 하드코딩된 키 대신 IAM 역할
- **KMS 암호화**: 민감한 데이터 암호화
- **VPC**: 네트워크 격리
- **CloudTrail**: 모든 API 호출 로깅

## ⚠️ 절대 하지 말아야 할 것들

1. **Git에 시크릿 커밋** ❌
2. **로그에 비밀번호/토큰 출력** ❌
3. **HTTP로 토큰 전송** ❌
4. **클라이언트 코드에 API 키 하드코딩** ❌
5. **만료되지 않는 토큰 사용** ❌
6. **약한 비밀번호 정책** ❌

## 🛡️ 현재 구현 상태

### ✅ 구현됨
- JWT 토큰 기반 인증
- 토큰 만료 시간 설정
- 환경 변수 사용 준비

### 🔄 개선 필요
- 비밀번호 해싱 (현재 평문 저장)
- HTTPS 설정
- Rate limiting
- 입력 검증 강화
- 에러 처리 개선
