# 🚀 TeamSync Pro 배포 가이드

## 📋 배포 준비 체크리스트

### ✅ 완료된 구현
- [x] **Backend API** - 40+ 엔드포인트 완전 구현
- [x] **Frontend Web Console** - React 기반 완전한 UI
- [x] **VS Code Extension** - 모든 핵심 기능 구현
- [x] **데이터베이스** - SQLite/PostgreSQL 지원
- [x] **인증 시스템** - JWT 기반 보안 인증
- [x] **테스트 스위트** - 포괄적인 API 테스트
- [x] **Docker 컨테이너화** - 프로덕션 배포 준비
- [x] **보안 가이드** - 완전한 보안 문서

## 🏗️ 로컬 개발 환경 설정

### 1. 저장소 클론
```bash
git clone <repository-url>
cd team11-aws-hackathon
```

### 2. Backend 실행
```bash
# Python 의존성 설치
pip install -r requirements.txt

# 환경 변수 설정
cp .env.example .env
# .env 파일 편집하여 JWT_SECRET 설정

# 서버 실행
python working_server.py
```

### 3. Frontend 실행
```bash
cd src/frontend
npm install
npm run dev
```

### 4. Extension 개발
```bash
cd src/extension
npm install
npm run compile
# VS Code에서 F5로 Extension Development Host 실행
```

## 🐳 Docker 배포

### 1. Docker Compose로 전체 스택 실행
```bash
# 프로덕션 빌드
cd src/frontend && npm run build && cd ../..

# Docker 컨테이너 실행
docker-compose up -d

# 로그 확인
docker-compose logs -f
```

### 2. 개별 서비스 실행
```bash
# Backend만 실행
docker build -t teamsync-backend .
docker run -p 8000:8000 teamsync-backend

# Frontend (Nginx)
docker run -p 3000:80 -v ./src/frontend/dist:/usr/share/nginx/html nginx:alpine
```

## ☁️ AWS 클라우드 배포

### 1. ECS/Fargate 배포
```bash
# ECR에 이미지 푸시
aws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin <account>.dkr.ecr.us-east-1.amazonaws.com
docker tag teamsync-backend:latest <account>.dkr.ecr.us-east-1.amazonaws.com/teamsync-backend:latest
docker push <account>.dkr.ecr.us-east-1.amazonaws.com/teamsync-backend:latest

# ECS 서비스 배포
aws ecs update-service --cluster teamsync-cluster --service teamsync-backend --force-new-deployment
```

### 2. Lambda 배포 (서버리스)
```bash
# Mangum으로 FastAPI를 Lambda에 배포
pip install mangum
# lambda_handler.py 생성 후 배포
```

### 3. RDS 데이터베이스 설정
```bash
# PostgreSQL RDS 인스턴스 생성
aws rds create-db-instance \
  --db-instance-identifier teamsync-db \
  --db-instance-class db.t3.micro \
  --engine postgres \
  --master-username teamsync \
  --master-user-password <secure-password> \
  --allocated-storage 20
```

## 🔧 환경 변수 설정

### Backend (.env)
```bash
# JWT 설정
JWT_SECRET=your-super-secret-32-character-key
JWT_EXPIRES_IN_HOURS=24

# 데이터베이스
DATABASE_URL=postgresql://user:password@host:5432/teamsync
# 또는 SQLite
DATABASE_URL=sqlite:///./teamsync.db

# CORS 설정
ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com

# 로깅
LOG_LEVEL=INFO
```

### Frontend (.env)
```bash
VITE_API_BASE_URL=http://localhost:8000
# 프로덕션: https://api.yourdomain.com
```

## 🧪 테스트 실행

### 1. API 테스트
```bash
# 서버가 실행 중인 상태에서
python tests/test_api.py

# 또는 pytest 사용
pip install pytest
pytest tests/
```

### 2. Frontend 테스트
```bash
cd src/frontend
npm test
```

### 3. Extension 테스트
```bash
cd src/extension
npm test
```

## 📊 모니터링 및 로깅

### 1. 헬스 체크 엔드포인트
- `GET /health` - 서버 상태 확인
- `GET /_health` - 공개 헬스 체크

### 2. 로그 모니터링
```bash
# Docker 로그
docker-compose logs -f backend

# 시스템 로그
tail -f /var/log/teamsync/app.log
```

### 3. 메트릭 수집
- Prometheus + Grafana 설정
- CloudWatch (AWS)
- Application Insights (Azure)

## 🔒 보안 설정

### 1. HTTPS 설정
```bash
# Let's Encrypt 인증서
certbot --nginx -d yourdomain.com
```

### 2. 방화벽 설정
```bash
# UFW (Ubuntu)
ufw allow 22/tcp
ufw allow 80/tcp
ufw allow 443/tcp
ufw enable
```

### 3. 데이터베이스 보안
- 강력한 비밀번호 설정
- VPC 내부 네트워크만 접근 허용
- 정기적인 백업 설정

## 🚀 성능 최적화

### 1. Backend 최적화
- Gunicorn/Uvicorn 워커 수 조정
- 데이터베이스 연결 풀링
- Redis 캐싱 추가

### 2. Frontend 최적화
- CDN 사용 (CloudFront)
- 이미지 최적화
- 코드 스플리팅

### 3. 데이터베이스 최적화
- 인덱스 최적화
- 쿼리 성능 튜닝
- 읽기 전용 복제본 설정

## 📈 확장성 고려사항

### 1. 수평 확장
- 로드 밸런서 설정
- 다중 인스턴스 배포
- 세션 스토어 외부화

### 2. 데이터베이스 확장
- 읽기 복제본
- 샤딩 전략
- 캐싱 레이어

### 3. 마이크로서비스 분리
- 인증 서비스 분리
- 알림 서비스 분리
- 파일 저장소 분리

## 🔄 CI/CD 파이프라인

### GitHub Actions 예시
```yaml
name: Deploy to Production

on:
  push:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Run tests
        run: python tests/test_api.py

  deploy:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to AWS
        run: |
          aws ecs update-service --cluster teamsync --service backend
```

## 📞 지원 및 문제 해결

### 일반적인 문제들

1. **포트 충돌**
   ```bash
   lsof -i :8000
   kill -9 <PID>
   ```

2. **데이터베이스 연결 실패**
   - 연결 문자열 확인
   - 방화벽 설정 확인
   - 인증 정보 확인

3. **CORS 오류**
   - ALLOWED_ORIGINS 환경 변수 확인
   - 프론트엔드 URL 허용 목록 추가

### 로그 위치
- Backend: `/var/log/teamsync/`
- Nginx: `/var/log/nginx/`
- Docker: `docker-compose logs`

## 🎯 배포 완료 확인

### 1. 기능 테스트
- [ ] 사용자 회원가입/로그인
- [ ] 팀 생성 및 관리
- [ ] 설정 동기화
- [ ] 프롬프트 관리
- [ ] 북마크 기능
- [ ] 알림 시스템

### 2. 성능 테스트
- [ ] 응답 시간 < 200ms
- [ ] 동시 사용자 100명 지원
- [ ] 99.9% 가용성

### 3. 보안 테스트
- [ ] HTTPS 강제 적용
- [ ] JWT 토큰 검증
- [ ] SQL 인젝션 방어
- [ ] XSS 방어

## 🎉 배포 완료!

TeamSync Pro가 성공적으로 배포되었습니다!

- **Backend API**: http://localhost:8000
- **Frontend**: http://localhost:3000
- **API 문서**: http://localhost:8000/docs
- **헬스 체크**: http://localhost:8000/health

문제가 발생하면 로그를 확인하고 GitHub Issues에 보고해주세요.
