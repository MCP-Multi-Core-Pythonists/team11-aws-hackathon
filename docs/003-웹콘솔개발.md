# 003-웹콘솔개발.md

## Web Console 개발 가이드

### 프로젝트 구조
```
src/frontend/
├── public/
│   ├── index.html
│   └── favicon.ico
├── src/
│   ├── App.tsx              # 메인 앱 컴포넌트
│   ├── main.tsx            # 엔트리 포인트
│   ├── components/         # 재사용 컴포넌트
│   │   ├── ui/            # 기본 UI 컴포넌트
│   │   ├── layout/        # 레이아웃 컴포넌트
│   │   └── forms/         # 폼 컴포넌트
│   ├── pages/             # 페이지 컴포넌트
│   │   ├── Dashboard.tsx
│   │   ├── Teams.tsx
│   │   ├── Configurations.tsx
│   │   └── Prompts.tsx
│   ├── hooks/             # 커스텀 훅
│   ├── store/             # 상태 관리
│   ├── services/          # API 서비스
│   ├── types/             # TypeScript 타입
│   └── utils/             # 유틸리티 함수
├── package.json
├── vite.config.ts
└── tailwind.config.js
```

### 핵심 컴포넌트 구현

#### 1. 메인 앱 구조
```typescript
// src/App.tsx
import { BrowserRouter, Routes, Route } from 'react-router-dom';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { AuthProvider } from './contexts/AuthContext';
import { Layout } from './components/layout/Layout';
import { Dashboard } from './pages/Dashboard';
import { Teams } from './pages/Teams';

const queryClient = new QueryClient();

export default function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <AuthProvider>
        <BrowserRouter>
          <Layout>
            <Routes>
              <Route path="/" element={<Dashboard />} />
              <Route path="/teams" element={<Teams />} />
              <Route path="/teams/:id" element={<TeamDetail />} />
              <Route path="/configurations" element={<Configurations />} />
              <Route path="/prompts" element={<Prompts />} />
            </Routes>
          </Layout>
        </BrowserRouter>
      </AuthProvider>
    </QueryClientProvider>
  );
}
```

#### 2. 인증 컨텍스트
```typescript
// src/contexts/AuthContext.tsx
interface AuthContextType {
  user: User | null;
  login: (provider: 'google' | 'github') => Promise<void>;
  logout: () => void;
  isLoading: boolean;
}

export const AuthContext = createContext<AuthContextType | null>(null);

export function AuthProvider({ children }: { children: ReactNode }) {
  const [user, setUser] = useState<User | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  const login = async (provider: 'google' | 'github') => {
    setIsLoading(true);
    try {
      const response = await authService.login(provider);
      setUser(response.user);
      localStorage.setItem('token', response.token);
    } catch (error) {
      toast.error('로그인에 실패했습니다.');
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <AuthContext.Provider value={{ user, login, logout, isLoading }}>
      {children}
    </AuthContext.Provider>
  );
}
```

#### 3. 팀 관리 페이지
```typescript
// src/pages/Teams.tsx
export function Teams() {
  const { data: teams, isLoading } = useQuery({
    queryKey: ['teams'],
    queryFn: teamService.getTeams
  });

  const createTeamMutation = useMutation({
    mutationFn: teamService.createTeam,
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['teams'] });
      toast.success('팀이 생성되었습니다.');
    }
  });

  return (
    <div className="space-y-6">
      <div className="flex justify-between items-center">
        <h1 className="text-2xl font-bold">팀 관리</h1>
        <CreateTeamDialog onSubmit={createTeamMutation.mutate} />
      </div>
      
      {isLoading ? (
        <TeamsSkeleton />
      ) : (
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {teams?.map(team => (
            <TeamCard key={team.id} team={team} />
          ))}
        </div>
      )}
    </div>
  );
}
```

#### 4. 설정 뷰어 컴포넌트
```typescript
// src/components/ConfigurationViewer.tsx
interface ConfigurationViewerProps {
  configuration: Configuration;
  onUpdate: (config: Configuration) => void;
}

export function ConfigurationViewer({ configuration, onUpdate }: ConfigurationViewerProps) {
  const [activeTab, setActiveTab] = useState<'settings' | 'extensions' | 'keybindings'>('settings');
  
  return (
    <div className="bg-white rounded-lg shadow">
      <div className="border-b border-gray-200">
        <nav className="flex space-x-8 px-6">
          {tabs.map(tab => (
            <button
              key={tab.id}
              onClick={() => setActiveTab(tab.id)}
              className={`py-4 px-1 border-b-2 font-medium text-sm ${
                activeTab === tab.id
                  ? 'border-blue-500 text-blue-600'
                  : 'border-transparent text-gray-500 hover:text-gray-700'
              }`}
            >
              {tab.name}
            </button>
          ))}
        </nav>
      </div>
      
      <div className="p-6">
        {activeTab === 'settings' && (
          <JsonEditor
            value={configuration.settings}
            onChange={(value) => onUpdate({ ...configuration, settings: value })}
          />
        )}
        {activeTab === 'extensions' && (
          <ExtensionsList
            extensions={configuration.extensions}
            onChange={(extensions) => onUpdate({ ...configuration, extensions })}
          />
        )}
        {activeTab === 'keybindings' && (
          <KeybindingsEditor
            keybindings={configuration.keybindings}
            onChange={(keybindings) => onUpdate({ ...configuration, keybindings })}
          />
        )}
      </div>
    </div>
  );
}
```

### 상태 관리 (Zustand)

#### 1. 팀 스토어
```typescript
// src/store/teamStore.ts
interface TeamState {
  teams: Team[];
  currentTeam: Team | null;
  setTeams: (teams: Team[]) => void;
  setCurrentTeam: (team: Team) => void;
  addTeam: (team: Team) => void;
  updateTeam: (id: string, updates: Partial<Team>) => void;
  removeTeam: (id: string) => void;
}

export const useTeamStore = create<TeamState>((set) => ({
  teams: [],
  currentTeam: null,
  setTeams: (teams) => set({ teams }),
  setCurrentTeam: (currentTeam) => set({ currentTeam }),
  addTeam: (team) => set((state) => ({ teams: [...state.teams, team] })),
  updateTeam: (id, updates) => set((state) => ({
    teams: state.teams.map(team => 
      team.id === id ? { ...team, ...updates } : team
    )
  })),
  removeTeam: (id) => set((state) => ({
    teams: state.teams.filter(team => team.id !== id)
  }))
}));
```

### API 서비스 레이어

#### 1. HTTP 클라이언트 설정
```typescript
// src/services/api.ts
const API_BASE_URL = import.meta.env.VITE_API_BASE_URL;

class ApiClient {
  private baseURL: string;
  
  constructor(baseURL: string) {
    this.baseURL = baseURL;
  }
  
  async request<T>(endpoint: string, options: RequestInit = {}): Promise<T> {
    const token = localStorage.getItem('token');
    
    const response = await fetch(`${this.baseURL}${endpoint}`, {
      ...options,
      headers: {
        'Content-Type': 'application/json',
        ...(token && { Authorization: `Bearer ${token}` }),
        ...options.headers,
      },
    });
    
    if (!response.ok) {
      throw new Error(`API Error: ${response.status}`);
    }
    
    return response.json();
  }
}

export const apiClient = new ApiClient(API_BASE_URL);
```

#### 2. 팀 서비스
```typescript
// src/services/teamService.ts
export const teamService = {
  async getTeams(): Promise<Team[]> {
    return apiClient.request<Team[]>('/teams');
  },
  
  async createTeam(data: CreateTeamRequest): Promise<Team> {
    return apiClient.request<Team>('/teams', {
      method: 'POST',
      body: JSON.stringify(data),
    });
  },
  
  async inviteMember(teamId: string, email: string): Promise<void> {
    return apiClient.request(`/teams/${teamId}/invite`, {
      method: 'POST',
      body: JSON.stringify({ email }),
    });
  }
};
```

### TODO 리스트

#### Phase 1: 프로젝트 설정 (완료 예정: 1시간)
- [ ] Vite + React + TypeScript 프로젝트 생성
- [ ] Tailwind CSS 설정
- [ ] 라우팅 설정 (React Router)
- [ ] 기본 레이아웃 구성

#### Phase 2: 인증 시스템 (완료 예정: 2시간)
- [ ] 소셜 로그인 UI (Google, GitHub)
- [ ] 인증 컨텍스트 구현
- [ ] 토큰 관리 및 자동 갱신
- [ ] 보호된 라우트 구현

#### Phase 3: 대시보드 (완료 예정: 3시간)
- [ ] 팀 현황 카드
- [ ] 최근 활동 피드
- [ ] 통계 차트 (Chart.js)
- [ ] 빠른 액션 버튼

#### Phase 4: 팀 관리 (완료 예정: 4시간)
- [ ] 팀 목록 및 카드 UI
- [ ] 팀 생성/편집 모달
- [ ] 멤버 초대 시스템
- [ ] 권한 관리 UI

#### Phase 5: 설정 관리 (완료 예정: 5시간)
- [ ] 설정 파일 뷰어/에디터
- [ ] JSON 에디터 컴포넌트
- [ ] 설정 비교 도구
- [ ] 히스토리 및 롤백 UI
